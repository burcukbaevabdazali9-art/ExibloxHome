<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>ExiWin 12</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;user-select:none;}
:root{
  --accent:#0078d4;--accent2:#60cdff;
  --bg1:rgba(15,20,35,0.95);--bg2:rgba(255,255,255,0.06);
  --border:rgba(255,255,255,0.10);--text:#fff;--text2:rgba(255,255,255,0.55);
  --radius:12px;--shadow:0 12px 48px rgba(0,0,0,0.55);--blur:blur(40px);
  --desktop-bg:linear-gradient(160deg,#040c1a 0%,#061020 40%,#040c18 100%);
  --taskbar-bg:rgba(8,12,22,.92);--menu-bg:rgba(12,16,28,.97);
  --card-bg:rgba(255,255,255,.04);--input-bg:rgba(255,255,255,.07);
}
body.light-theme{
  --bg1:rgba(250,252,255,0.97);--bg2:rgba(0,0,0,0.04);
  --border:rgba(0,0,0,0.10);--text:#111;--text2:rgba(0,0,0,0.55);
  --shadow:0 8px 28px rgba(0,0,0,0.12);
  --desktop-bg:linear-gradient(160deg,#dceeff 0%,#eef4fb 40%,#d8eaf5 100%);
  --taskbar-bg:rgba(245,249,255,.96);--menu-bg:rgba(255,255,255,.99);
  --card-bg:rgba(0,0,0,.03);--input-bg:rgba(0,0,0,.05);
}
body{font-family:'Segoe UI',system-ui,sans-serif;background:#000;overflow:hidden;width:100vw;height:100vh;color:var(--text);}

/* RAINBOW CURSOR CANVAS */
#rainbow-cursor-canvas{
  position:fixed;top:0;left:0;width:100vw;height:100vh;
  pointer-events:none;z-index:999999;
}

/* BOOT */
#boot{position:fixed;inset:0;background:#000;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:99999;transition:opacity .5s;}
.boot-logo{font-size:76px;font-weight:800;margin-bottom:48px;background:linear-gradient(135deg,#0078d4,#60cdff,#0078d4);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;animation:logoPulse 2s ease-in-out infinite;}
@keyframes logoPulse{0%,100%{filter:brightness(1)}50%{filter:brightness(1.3)}}
.boot-bar{width:200px;height:3px;background:rgba(255,255,255,.1);border-radius:2px;overflow:hidden;}
.boot-fill{height:100%;background:linear-gradient(90deg,#0078d4,#60cdff);border-radius:2px;animation:bootFill 2.2s ease forwards;}
@keyframes bootFill{0%{width:0}60%{width:70%}100%{width:100%}}
.boot-txt{color:rgba(255,255,255,.3);font-size:12px;margin-top:16px;letter-spacing:2px;}

/* REG/LOGIN */
#regscreen{position:fixed;inset:0;z-index:9990;display:none;align-items:center;justify-content:center;background:linear-gradient(135deg,#040e1f 0%,#091428 100%);}
.reg-box{background:rgba(255,255,255,.05);backdrop-filter:var(--blur);border:1px solid rgba(255,255,255,.1);border-radius:20px;padding:40px;width:420px;box-shadow:var(--shadow);text-align:center;}
.reg-logo{font-size:44px;font-weight:800;background:linear-gradient(135deg,#0078d4,#60cdff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:12px;}
.reg-box h2{font-size:24px;font-weight:300;margin-bottom:6px;color:#fff;}
.reg-box p{color:rgba(255,255,255,.5);font-size:13px;margin-bottom:26px;}
.reg-avatar-pick{display:flex;gap:10px;justify-content:center;margin-bottom:22px;flex-wrap:wrap;}
.av-opt{width:46px;height:46px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:22px;border:3px solid transparent;transition:all .2s;background:rgba(255,255,255,.06);}
.av-opt.sel{border-color:#60cdff;transform:scale(1.15);}
.reg-input{width:100%;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.1);border-radius:10px;padding:11px 14px;color:#fff;font-size:14px;font-family:inherit;outline:none;margin-bottom:10px;transition:border .2s;}
.reg-input:focus{border-color:var(--accent);}
.reg-input::placeholder{color:rgba(255,255,255,.35);}
.reg-btn{width:100%;padding:12px;border-radius:10px;border:none;background:var(--accent);color:#fff;font-size:14px;cursor:pointer;font-family:inherit;font-weight:500;transition:background .2s;margin-top:4px;}
.reg-btn:hover{background:#106ebe;}
.reg-switch{color:rgba(255,255,255,.5);font-size:13px;margin-top:14px;cursor:pointer;}
.reg-switch span{color:var(--accent2);}
.reg-err{color:#ff6b6b;font-size:12px;margin-top:8px;min-height:18px;}

/* LOCK */
#lockscreen{position:fixed;inset:0;z-index:9980;display:none;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;background:linear-gradient(160deg,#040c1a 0%,#081428 100%);}
.lock-glow{position:absolute;width:600px;height:600px;border-radius:50%;background:radial-gradient(circle,rgba(0,120,212,.12) 0%,transparent 70%);top:50%;left:50%;transform:translate(-50%,-50%);pointer-events:none;animation:glowPulse 4s ease-in-out infinite;}
@keyframes glowPulse{0%,100%{opacity:.6;transform:translate(-50%,-50%) scale(1)}50%{opacity:1;transform:translate(-50%,-50%) scale(1.1)}}
#lock-clock{font-size:88px;font-weight:200;letter-spacing:6px;color:#fff;text-shadow:0 0 40px rgba(0,120,212,.3);}
#lock-date-lock{font-size:18px;color:rgba(255,255,255,.55);margin-bottom:48px;}
.lock-user{display:flex;flex-direction:column;align-items:center;gap:12px;}
#lock-avatar{width:72px;height:72px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:36px;box-shadow:0 0 0 3px rgba(255,255,255,.2);}
#lock-username-disp{font-size:18px;color:#fff;}
.lock-hint{font-size:13px;color:rgba(255,255,255,.3);margin-top:18px;animation:pulse 2s ease infinite;}
@keyframes pulse{0%,100%{opacity:.3}50%{opacity:.8}}

/* DESKTOP */
#desktop{width:100%;height:calc(100% - 48px);position:relative;overflow:hidden;background:var(--desktop-bg);}
.desk-aurora{position:absolute;inset:0;pointer-events:none;background:conic-gradient(from 200deg at 30% 60%,transparent 0deg,rgba(0,80,180,.06) 60deg,rgba(0,150,255,.08) 100deg,rgba(60,0,180,.05) 150deg,transparent 200deg);animation:auroraRot 20s linear infinite;}
@keyframes auroraRot{from{transform:rotate(0)}to{transform:rotate(360deg)}}
.desk-glow{position:absolute;width:700px;height:500px;border-radius:50%;background:radial-gradient(ellipse,rgba(0,100,200,.08) 0%,transparent 70%);top:20%;left:30%;pointer-events:none;}
body.light-theme .desk-aurora{background:conic-gradient(from 200deg at 30% 60%,transparent 0deg,rgba(0,120,212,.03) 60deg,rgba(0,150,255,.05) 100deg,rgba(100,80,255,.03) 150deg,transparent 200deg);}

/* DESK ICONS */
.desk-icon{position:absolute;display:flex;flex-direction:column;align-items:center;gap:6px;padding:8px 6px;width:82px;cursor:pointer;border-radius:10px;transition:background .15s;}
.desk-icon:hover{background:rgba(255,255,255,.09);}
body.light-theme .desk-icon:hover{background:rgba(0,0,0,.07);}
.desk-icon.selected{background:rgba(0,120,212,.3);}
.desk-icon .dico{font-size:36px;line-height:1;filter:drop-shadow(0 3px 8px rgba(0,0,0,.5));}
body.light-theme .desk-icon .dico{filter:drop-shadow(0 2px 4px rgba(0,0,0,.2));}
.desk-icon span{font-size:11px;color:#fff;text-align:center;text-shadow:0 1px 6px rgba(0,0,0,.9);line-height:1.3;word-break:break-word;}
body.light-theme .desk-icon span{color:var(--text);text-shadow:0 1px 3px rgba(255,255,255,.8);}

/* TASKBAR */
#taskbar{position:fixed;bottom:0;left:0;right:0;height:48px;background:var(--taskbar-bg);backdrop-filter:var(--blur);border-top:1px solid var(--border);display:flex;align-items:center;z-index:1000;}
#tb-left{display:flex;align-items:center;padding-left:8px;gap:2px;}
#tb-center{position:absolute;left:50%;transform:translateX(-50%);display:flex;align-items:center;gap:2px;}
#tb-right{position:absolute;right:0;display:flex;align-items:center;padding-right:8px;gap:4px;}
#start-btn{width:44px;height:38px;display:flex;align-items:center;justify-content:center;border-radius:8px;cursor:pointer;font-size:22px;font-weight:800;transition:background .15s;background:linear-gradient(135deg,#0078d4,#60cdff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
#start-btn:hover{background:rgba(255,255,255,.1);-webkit-text-fill-color:var(--text);}
.tb-sep{width:1px;height:22px;background:var(--border);margin:0 4px;}
.tb-btn{width:44px;height:38px;display:flex;align-items:center;justify-content:center;border-radius:8px;cursor:pointer;font-size:19px;transition:background .15s;position:relative;flex-shrink:0;}
.tb-btn:hover{background:rgba(255,255,255,.09);}
body.light-theme .tb-btn:hover{background:rgba(0,0,0,.07);}
.tb-btn.running::after{content:'';position:absolute;bottom:3px;left:50%;transform:translateX(-50%);width:4px;height:4px;border-radius:50%;background:var(--accent2);}
.tb-btn.active-win{background:rgba(255,255,255,.12);}
body.light-theme .tb-btn.active-win{background:rgba(0,0,0,.10);}
.tb-sys{display:flex;align-items:center;gap:5px;font-size:13px;cursor:pointer;padding:4px 8px;border-radius:8px;transition:background .15s;}
.tb-sys:hover{background:rgba(255,255,255,.09);}
body.light-theme .tb-sys:hover{background:rgba(0,0,0,.07);}
#tb-clock{color:var(--text);font-size:11.5px;text-align:right;cursor:pointer;line-height:1.5;padding:0 4px;}

/* START MENU */
#start-menu{position:fixed;bottom:56px;left:50%;transform:translateX(-50%) translateY(8px);width:680px;background:var(--menu-bg);backdrop-filter:var(--blur);border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow);display:none;flex-direction:column;z-index:900;overflow:hidden;opacity:0;transition:opacity .18s,transform .18s;}
#start-menu.show{opacity:1;transform:translateX(-50%) translateY(0);}
#sm-search{margin:16px 16px 0;display:flex;align-items:center;background:var(--input-bg);border:1px solid var(--border);border-radius:10px;padding:9px 14px;gap:10px;}
#sm-search input{background:none;border:none;outline:none;color:var(--text);font-size:13px;flex:1;font-family:inherit;}
#sm-search input::placeholder{color:var(--text2);}
.sm-sec{padding:12px 16px 6px;font-size:11px;color:var(--text2);letter-spacing:.5px;text-transform:uppercase;}
.pinned-apps{display:grid;grid-template-columns:repeat(6,1fr);gap:2px;padding:0 8px;}
.pin-app{display:flex;flex-direction:column;align-items:center;gap:5px;padding:12px 6px 8px;border-radius:10px;cursor:pointer;transition:background .15s;}
.pin-app:hover{background:var(--bg2);}
.pin-app .ico{font-size:24px;}
.pin-app .lbl{font-size:10.5px;color:var(--text2);text-align:center;}
.rec-list{padding:0 10px;display:flex;flex-direction:column;gap:1px;}
.rec-row{display:flex;align-items:center;gap:12px;padding:8px 10px;border-radius:8px;cursor:pointer;transition:background .15s;}
.rec-row:hover{background:var(--bg2);}
.rec-row .ico{font-size:20px;}
.rec-info .n{font-size:13px;color:var(--text);}
.rec-info .t{font-size:11px;color:var(--text2);}
#sm-search-results{padding:0 10px;}
#sm-footer{display:flex;justify-content:space-between;align-items:center;padding:10px 16px;border-top:1px solid var(--border);}
#sm-user{display:flex;align-items:center;gap:10px;cursor:pointer;padding:6px 10px;border-radius:8px;transition:background .15s;}
#sm-user:hover{background:var(--bg2);}
#sm-avatar{width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:15px;}
#sm-username{font-size:13px;color:var(--text);}
.power-menu{display:flex;gap:3px;}
.pw-btn{width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:15px;transition:background .15s;color:var(--text2);}
.pw-btn:hover{background:rgba(196,43,28,.7);color:#fff;}

/* TRAY */
#tray-popup{position:fixed;bottom:56px;right:8px;width:380px;background:var(--menu-bg);backdrop-filter:var(--blur);border:1px solid var(--border);border-radius:16px;padding:18px;box-shadow:var(--shadow);display:none;z-index:900;}
.tray-time-big{font-size:50px;font-weight:200;text-align:center;letter-spacing:2px;color:var(--text);}
.tray-date-str{font-size:12px;color:var(--text2);text-align:center;margin-bottom:14px;}
.tray-tiles{display:grid;grid-template-columns:repeat(4,1fr);gap:7px;margin-bottom:12px;}
.tr-tile{background:rgba(0,120,212,.25);border-radius:10px;padding:10px 8px 7px;cursor:pointer;transition:all .15s;display:flex;flex-direction:column;gap:3px;}
.tr-tile:hover{background:rgba(0,120,212,.4);}
.tr-tile.off{background:var(--bg2);}
.tr-tile .ico{font-size:16px;}
.tr-tile .lbl{font-size:10px;color:var(--text2);}
.sl-row{display:flex;align-items:center;gap:10px;margin:5px 0;}
.sl-row .ico{font-size:15px;flex-shrink:0;}
.sl-row input[type=range]{flex:1;accent-color:var(--accent);height:4px;}
.sl-val{font-size:11px;color:var(--text2);width:32px;text-align:right;}

/* CONTEXT MENU */
#ctx-menu{position:fixed;z-index:9998;background:var(--menu-bg);backdrop-filter:var(--blur);border:1px solid var(--border);border-radius:var(--radius);padding:5px;min-width:210px;box-shadow:var(--shadow);display:none;}
.ctx-item{padding:8px 12px;border-radius:8px;font-size:13px;color:var(--text);cursor:pointer;display:flex;align-items:center;gap:10px;transition:background .1s;position:relative;}
.ctx-item:hover{background:var(--bg2);}
.ctx-sep{height:1px;background:var(--border);margin:3px 2px;}
/* Create submenu */
#ctx-create-sub{position:fixed;z-index:9999;background:var(--menu-bg);backdrop-filter:var(--blur);border:1px solid var(--border);border-radius:var(--radius);padding:5px;min-width:200px;box-shadow:var(--shadow);display:none;}

/* Explorer view mode buttons */
.exp-view-btn{width:26px;height:22px;border-radius:5px;display:flex;align-items:center;justify-content:center;font-size:12px;cursor:pointer;color:var(--text2);transition:background .12s;}
.exp-view-btn:hover{background:var(--bg2);}
.exp-view-btn.active-view{background:rgba(0,120,212,.35);color:var(--text);}

/* WINDOW BASE */
.window{position:absolute;background:var(--bg1);backdrop-filter:var(--blur);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);display:none;flex-direction:column;min-width:320px;min-height:200px;z-index:100;animation:winOpen .14s ease;}
@keyframes winOpen{from{opacity:0;transform:scale(.96)}to{opacity:1;transform:scale(1)}}
@keyframes winClose{from{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.95)}}
.window.maximized{border-radius:0!important;top:0!important;left:0!important;width:100%!important;height:calc(100vh - 48px)!important;}
.titlebar{height:40px;display:flex;align-items:center;padding:0 10px;cursor:move;border-radius:var(--radius) var(--radius) 0 0;flex-shrink:0;background:var(--bg2);border-bottom:1px solid var(--border);}
.tb-icon{font-size:15px;margin-right:8px;}
.tb-title{flex:1;font-size:13px;color:var(--text);}
.win-btns{display:flex;gap:2px;}
.wb{width:30px;height:26px;border-radius:6px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:11px;color:var(--text2);transition:background .12s;}
.wb:hover{background:var(--bg2);color:var(--text);}
.wb.cls:hover{background:rgba(196,43,28,.85);color:#fff;}
.win-body{flex:1;overflow:auto;border-radius:0 0 var(--radius) var(--radius);}
.resize-handle{position:absolute;width:14px;height:14px;bottom:0;right:0;cursor:se-resize;}

/* EXPLORER */
.exp-wrap{display:flex;flex-direction:column;height:100%;}
.exp-topbar{display:flex;align-items:center;gap:6px;padding:5px 8px;border-bottom:1px solid var(--border);flex-shrink:0;}
.exp-nav{width:28px;height:28px;border-radius:6px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:var(--text2);font-size:14px;transition:background .12s;}
.exp-nav:hover{background:var(--bg2);}
.exp-path{flex:1;background:var(--input-bg);border:1px solid var(--border);border-radius:7px;padding:4px 12px;font-size:12px;color:var(--text);cursor:text;outline:none;font-family:inherit;}
.exp-body{display:flex;flex:1;overflow:hidden;}
.exp-side{width:170px;border-right:1px solid var(--border);padding:8px;overflow-y:auto;flex-shrink:0;background:rgba(0,0,0,.1);}
.exp-side-item{padding:6px 10px;border-radius:7px;font-size:12px;color:var(--text2);cursor:pointer;display:flex;align-items:center;gap:8px;transition:background .12s;}
.exp-side-item:hover{background:var(--bg2);}
.exp-side-item.active{background:rgba(0,120,212,.3);color:var(--text);}
.exp-files{flex:1;padding:10px;display:grid;grid-template-columns:repeat(auto-fill,88px);gap:6px;align-content:start;overflow-y:auto;}
.file-item{display:flex;flex-direction:column;align-items:center;gap:4px;padding:8px 5px;border-radius:8px;cursor:pointer;transition:background .12s;}
.file-item:hover{background:var(--bg2);}
.file-item .ico{font-size:32px;}
.file-item .fname{font-size:10.5px;color:var(--text2);text-align:center;word-break:break-all;}
.exp-statusbar{padding:3px 14px;font-size:11px;color:var(--text2);border-top:1px solid var(--border);flex-shrink:0;display:flex;align-items:center;justify-content:space-between;}

/* NOTEPAD */
.np-wrap{display:flex;flex-direction:column;height:100%;}
.np-menubar{display:flex;border-bottom:1px solid var(--border);flex-shrink:0;}
.np-menu-item{padding:5px 12px;font-size:13px;color:var(--text2);cursor:pointer;transition:background .12s;position:relative;}
.np-menu-item:hover,.np-menu-item.open{background:var(--bg2);color:var(--text);}
.np-dropdown{position:absolute;top:100%;left:0;background:var(--menu-bg);border:1px solid var(--border);border-radius:8px;padding:4px;min-width:160px;z-index:9999;display:none;box-shadow:var(--shadow);}
.np-menu-item.open .np-dropdown{display:block;}
.np-dd-item{padding:6px 12px;border-radius:6px;font-size:13px;color:var(--text);cursor:pointer;display:flex;justify-content:space-between;align-items:center;}
.np-dd-item:hover{background:var(--bg2);}
.np-dd-item kbd{font-size:10px;color:var(--text2);background:var(--bg2);padding:1px 5px;border-radius:4px;}
.np-dd-sep{height:1px;background:var(--border);margin:3px 0;}
#np-area{flex:1;background:var(--input-bg);color:var(--text);border:none;outline:none;padding:14px;font-size:14px;font-family:'Consolas',monospace;resize:none;line-height:1.7;user-select:text;}
.np-statusbar{display:flex;gap:16px;padding:3px 10px;font-size:11px;color:var(--text2);border-top:1px solid var(--border);flex-shrink:0;}

/* CALCULATOR */
.calc-wrap{padding:12px;display:flex;flex-direction:column;gap:8px;height:100%;}
.calc-modes{display:flex;gap:2px;margin-bottom:2px;}
.calc-mode-btn{padding:4px 10px;border-radius:6px;font-size:11px;color:var(--text2);cursor:pointer;transition:background .12s;}
.calc-mode-btn:hover,.calc-mode-btn.active{background:var(--bg2);color:var(--text);}
.calc-display{background:var(--input-bg);border-radius:10px;padding:10px 14px;display:flex;flex-direction:column;align-items:flex-end;}
.calc-expr{font-size:12px;color:var(--text2);min-height:18px;word-break:break-all;}
.calc-result{font-size:36px;font-weight:300;min-height:48px;word-break:break-all;color:var(--text);}
.calc-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:6px;flex:1;}
.calc-sci{display:none;grid-template-columns:repeat(5,1fr);gap:6px;}
.cc{border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:14px;cursor:pointer;transition:all .1s;color:var(--text);min-height:44px;}
.cc:hover{filter:brightness(1.2);}
.cc:active{transform:scale(.93);}
.cc-fn{background:var(--bg2);color:var(--text2);}
.cc-op{background:rgba(0,120,212,.3);}
.cc-eq{background:var(--accent);color:#fff;}
.cc-num{background:var(--card-bg);}
.cc-sci-btn{background:rgba(96,205,255,.15);color:var(--accent2);font-size:12px;}

/* SETTINGS */
.set-wrap{display:flex;height:100%;}
.set-side{width:200px;border-right:1px solid var(--border);padding:8px;overflow-y:auto;background:rgba(0,0,0,.1);flex-shrink:0;}
.set-side-item{padding:9px 12px;border-radius:8px;font-size:12px;color:var(--text2);cursor:pointer;display:flex;align-items:center;gap:8px;transition:background .12s;}
.set-side-item:hover{background:var(--bg2);}
.set-side-item.active{background:rgba(0,120,212,.3);color:var(--text);}
.set-content{flex:1;padding:22px;overflow-y:auto;}
.set-page{display:none;}
.set-page.active{display:block;}
.set-h1{font-size:20px;font-weight:300;margin-bottom:18px;color:var(--text);}
.set-card{background:var(--card-bg);border:1px solid var(--border);border-radius:10px;padding:12px 16px;margin-bottom:7px;display:flex;align-items:center;justify-content:space-between;gap:14px;}
.set-card-l .n{font-size:13px;color:var(--text);}
.set-card-l .d{font-size:11px;color:var(--text2);margin-top:2px;}
.toggle{width:42px;height:22px;border-radius:11px;background:var(--bg2);position:relative;cursor:pointer;transition:background .2s;flex-shrink:0;}
.toggle.on{background:var(--accent);}
.toggle::after{content:'';position:absolute;width:16px;height:16px;background:#fff;border-radius:50%;top:3px;left:3px;transition:transform .2s;}
.toggle.on::after{transform:translateX(20px);}
.set-select{background:var(--input-bg);border:1px solid var(--border);border-radius:7px;padding:5px 9px;color:var(--text);font-size:12px;outline:none;font-family:inherit;cursor:pointer;}
.set-range-wrap{display:flex;align-items:center;gap:8px;margin-top:6px;}
.set-range-wrap input{flex:1;accent-color:var(--accent);}

/* BROWSER */
.br-wrap{display:flex;flex-direction:column;height:100%;}
.br-bar{display:flex;align-items:center;gap:5px;padding:6px 8px;border-bottom:1px solid var(--border);flex-shrink:0;}
.br-nav{width:28px;height:28px;border-radius:6px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:var(--text2);font-size:14px;transition:background .12s;}
.br-nav:hover{background:var(--bg2);}
.br-url-bar{flex:1;background:var(--input-bg);border:1px solid var(--border);border-radius:18px;padding:5px 14px;font-size:12px;color:var(--text);outline:none;font-family:inherit;}
#br-newtab{flex:1;padding:28px 20px;display:flex;flex-direction:column;align-items:center;gap:18px;overflow-y:auto;}
.br-greeting{font-size:24px;font-weight:300;color:var(--text);}
.br-searchbar{display:flex;align-items:center;background:var(--input-bg);border:1px solid var(--border);border-radius:24px;padding:9px 18px;gap:10px;width:520px;max-width:100%;}
.br-searchbar input{background:none;border:none;outline:none;color:var(--text);font-size:14px;flex:1;font-family:inherit;}
.br-searchbar button{background:var(--accent);border:none;color:#fff;padding:6px 16px;border-radius:16px;cursor:pointer;font-size:12px;font-family:inherit;}
.br-shortcuts{display:grid;grid-template-columns:repeat(5,1fr);gap:8px;width:520px;max-width:100%;}
.br-sc{background:var(--card-bg);border-radius:12px;padding:12px 8px;display:flex;flex-direction:column;align-items:center;gap:7px;cursor:pointer;transition:background .12px;}
.br-sc:hover{background:var(--bg2);}
.br-sc .ico{font-size:20px;}
.br-sc span{font-size:10.5px;color:var(--text2);}
#br-frame{flex:1;width:100%;border:none;display:none;background:#fff;}

/* PAINT */
.paint-wrap{display:flex;flex-direction:column;height:100%;}
.paint-toolbar{display:flex;align-items:center;gap:7px;padding:6px 10px;border-bottom:1px solid var(--border);flex-shrink:0;flex-wrap:wrap;}
.paint-tool{width:32px;height:32px;border-radius:7px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:16px;transition:background .12s;}
.paint-tool:hover,.paint-tool.active{background:rgba(0,120,212,.35);}
.paint-colors{display:flex;gap:4px;flex-wrap:wrap;max-width:160px;}
.paint-color{width:18px;height:18px;border-radius:4px;cursor:pointer;border:2px solid transparent;transition:border .12s;}
.paint-color.active{border-color:var(--text);}
.paint-size{display:flex;align-items:center;gap:6px;font-size:11px;color:var(--text2);}
.paint-size input{width:70px;accent-color:var(--accent);}
.paint-canvas-wrap{flex:1;overflow:hidden;background:#fff;position:relative;}
#paint-canvas{cursor:crosshair;display:block;}

/* TASK MANAGER */
.tm-wrap{display:flex;flex-direction:column;height:100%;}
.tm-tabs{display:flex;border-bottom:1px solid var(--border);flex-shrink:0;}
.tm-tab{padding:10px 16px;font-size:12px;color:var(--text2);cursor:pointer;transition:all .12s;border-bottom:2px solid transparent;}
.tm-tab:hover{color:var(--text);}
.tm-tab.active{color:var(--text);border-bottom-color:var(--accent);}
.tm-body{flex:1;padding:12px;overflow-y:auto;}
.tm-table{width:100%;border-collapse:collapse;font-size:12px;}
.tm-table th{text-align:left;padding:7px 10px;color:var(--text2);font-weight:400;border-bottom:1px solid var(--border);}
.tm-table td{padding:7px 10px;border-bottom:1px solid rgba(255,255,255,.03);color:var(--text);}
.tm-table tr:hover td{background:var(--bg2);}
.tm-bar{height:5px;background:var(--bg2);border-radius:3px;overflow:hidden;display:inline-block;width:60px;vertical-align:middle;margin-right:4px;}
.tm-fill{height:100%;border-radius:3px;background:var(--accent);}
.tm-perf-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;}
.tm-perf-card{background:var(--card-bg);border:1px solid var(--border);border-radius:10px;padding:16px;}
.tm-perf-title{font-size:11px;color:var(--text2);margin-bottom:8px;}
.tm-perf-big{font-size:32px;font-weight:200;color:var(--text);margin-bottom:8px;}
.tm-perf-bar{height:6px;background:var(--bg2);border-radius:3px;overflow:hidden;margin-bottom:6px;}
.tm-perf-info{font-size:11px;color:var(--text2);}

/* EXIAN AI */
.echat-wrap{display:flex;height:100%;overflow:hidden;background:rgba(8,10,20,.97);}
body.light-theme .echat-wrap{background:rgba(246,248,255,.98);}
.echat-sidebar{width:230px;flex-shrink:0;border-right:1px solid var(--border);display:flex;flex-direction:column;background:rgba(0,0,0,.2);}
body.light-theme .echat-sidebar{background:rgba(0,0,0,.04);}
.echat-sidebar-header{padding:12px 10px 8px;font-size:12px;font-weight:600;color:var(--text2);letter-spacing:.5px;text-transform:uppercase;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;}
.echat-new-btn{background:var(--accent);color:#fff;border:none;border-radius:6px;padding:4px 10px;font-size:11px;cursor:pointer;font-family:inherit;transition:background .15s;}
.echat-new-btn:hover{background:#106ebe;}
#exian-sessions-list{flex:1;overflow-y:auto;padding:6px;}
.echat-session{padding:8px 10px;border-radius:8px;cursor:pointer;transition:background .12s;position:relative;margin-bottom:2px;}
.echat-session:hover{background:var(--bg2);}
.echat-session.active{background:rgba(0,120,212,.3);}
.echat-session-t{font-size:12px;color:var(--text);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:160px;}
.echat-session-d{font-size:10px;color:var(--text2);margin-top:2px;}
.echat-session-del{position:absolute;right:6px;top:50%;transform:translateY(-50%);color:var(--text2);font-size:11px;opacity:0;transition:opacity .15s;cursor:pointer;padding:2px 4px;}
.echat-session:hover .echat-session-del{opacity:1;}
.echat-session-del:hover{color:#e74c3c;}
.echat-sidebar-footer{padding:8px 10px;border-top:1px solid var(--border);}
.echat-clear-btn{font-size:11px;color:var(--text2);cursor:pointer;display:flex;align-items:center;gap:6px;padding:6px 8px;border-radius:6px;transition:background .12s;width:100%;}
.echat-clear-btn:hover{background:rgba(231,76,60,.2);color:#e74c3c;}
.echat-main{flex:1;display:flex;flex-direction:column;overflow:hidden;}
.echat-header{padding:12px 16px;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:12px;flex-shrink:0;background:rgba(0,0,0,.15);}
body.light-theme .echat-header{background:rgba(0,0,0,.04);}
.echat-header-ico{font-size:28px;}
.echat-header-info .echat-header-name{font-size:15px;font-weight:600;color:var(--text);}
.echat-header-info .echat-header-status{font-size:11px;color:#2ecc71;display:flex;align-items:center;gap:4px;}
.echat-header-info .echat-header-status::before{content:'';width:6px;height:6px;background:#2ecc71;border-radius:50%;display:inline-block;}
.echat-quick{display:flex;gap:8px;padding:10px 16px;border-bottom:1px solid var(--border);flex-shrink:0;flex-wrap:wrap;background:rgba(0,0,0,.08);}
body.light-theme .echat-quick{background:rgba(0,0,0,.03);}
.echat-quick-btn{padding:5px 12px;border-radius:20px;font-size:11px;background:var(--bg2);border:1px solid var(--border);color:var(--text2);cursor:pointer;transition:all .15s;white-space:nowrap;}
.echat-quick-btn:hover{background:rgba(0,120,212,.3);color:var(--text);border-color:var(--accent);}
#exian-chat-messages{flex:1;overflow-y:auto;padding:16px;display:flex;flex-direction:column;gap:14px;}
.echat-msg{display:flex;gap:10px;align-items:flex-start;}
.echat-user{flex-direction:row-reverse;}
.echat-bot{flex-direction:row;}
.echat-avatar-bot{width:32px;height:32px;border-radius:50%;background:linear-gradient(135deg,#0078d4,#60cdff);display:flex;align-items:center;justify-content:center;font-size:16px;flex-shrink:0;}
.echat-bot-wrap{display:flex;flex-direction:column;gap:4px;max-width:75%;}
.echat-bot-name{font-size:11px;color:var(--text2);margin-left:2px;}
.echat-bubble{padding:10px 14px;border-radius:14px;font-size:13px;line-height:1.6;word-break:break-word;user-select:text;}
.echat-bubble-user{background:linear-gradient(135deg,#0078d4,#006cbf);color:#fff;border-radius:14px 14px 4px 14px;max-width:65%;align-self:flex-end;}
.echat-bubble-bot{background:var(--bg2);border:1px solid var(--border);color:var(--text);border-radius:4px 14px 14px 14px;}
body.light-theme .echat-bubble-bot{background:rgba(0,0,0,.05);}
.echat-bubble pre{background:rgba(0,0,0,.3);border-radius:6px;padding:8px;font-size:11px;overflow-x:auto;margin:6px 0;}
body.light-theme .echat-bubble pre{background:rgba(0,0,0,.08);}
.echat-bubble code{font-family:'Consolas',monospace;font-size:11.5px;background:rgba(0,0,0,.25);padding:1px 4px;border-radius:4px;}
body.light-theme .echat-bubble code{background:rgba(0,0,0,.1);}
.echat-time{font-size:10px;color:var(--text2);padding:0 4px;}
.echat-msg-footer{display:flex;align-items:center;gap:8px;}
.echat-action{font-size:13px;cursor:pointer;opacity:0;transition:opacity .2s;}
.echat-bot-wrap:hover .echat-action{opacity:1;}
.echat-action:hover{filter:brightness(1.3);}
@keyframes echatIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
.echat-animate{animation:echatIn .25s ease;}
.echat-typing{display:flex;align-items:center;gap:4px;padding:12px 14px;}
.edot{width:7px;height:7px;border-radius:50%;background:var(--text2);display:inline-block;animation:dotBounce 1.2s ease infinite;}
.edot:nth-child(2){animation-delay:.2s;}
.edot:nth-child(3){animation-delay:.4s;}
@keyframes dotBounce{0%,80%,100%{transform:translateY(0)}40%{transform:translateY(-6px)}}
.echat-input-area{padding:12px 16px;border-top:1px solid var(--border);background:rgba(0,0,0,.15);flex-shrink:0;}
body.light-theme .echat-input-area{background:rgba(0,0,0,.04);}
.echat-input-row{display:flex;align-items:flex-end;gap:8px;background:var(--bg2);border:1px solid var(--border);border-radius:14px;padding:8px 8px 8px 14px;transition:border .2s;}
.echat-input-row:focus-within{border-color:var(--accent);}
#exian-chat-input{flex:1;background:none;border:none;outline:none;color:var(--text);font-size:13px;font-family:inherit;resize:none;line-height:1.5;max-height:120px;min-height:20px;overflow-y:auto;user-select:text;}
#exian-chat-input::placeholder{color:var(--text2);}
#exian-send-btn{width:34px;height:34px;border-radius:10px;background:var(--accent);border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:16px;transition:all .15s;flex-shrink:0;}
#exian-send-btn:hover{background:#106ebe;transform:scale(1.05);}
.echat-hint{font-size:10px;color:var(--text2);text-align:center;margin-top:6px;}

/* NOTIFICATIONS */
#notif-stack{position:fixed;bottom:60px;right:12px;z-index:9990;display:flex;flex-direction:column;gap:8px;align-items:flex-end;}
.notif{background:var(--menu-bg);backdrop-filter:var(--blur);border:1px solid var(--border);border-radius:14px;padding:12px 14px;width:310px;box-shadow:var(--shadow);display:flex;gap:10px;align-items:flex-start;animation:notifSlide .3s ease;}
@keyframes notifSlide{from{opacity:0;transform:translateX(30px)}to{opacity:1;transform:translateX(0)}}
.notif .nico{font-size:24px;flex-shrink:0;}
.notif-txt .nt{font-size:12.5px;font-weight:600;margin-bottom:2px;color:var(--text);}
.notif-txt .nd{font-size:11.5px;color:var(--text2);}
.notif-close{margin-left:auto;cursor:pointer;color:var(--text2);font-size:14px;padding:2px;}
.notif-close:hover{color:var(--text);}

::-webkit-scrollbar{width:4px;height:4px;}
::-webkit-scrollbar-track{background:transparent;}
::-webkit-scrollbar-thumb{background:rgba(128,128,128,.25);border-radius:3px;}
</style>
</head>
<body>

<!-- RAINBOW CURSOR CANVAS -->
<canvas id="rainbow-cursor-canvas"></canvas>

<!-- BOOT -->
<div id="boot">
  <div class="boot-logo">E‚ú¶</div>
  <div class="boot-bar"><div class="boot-fill"></div></div>
  <div class="boot-txt">ExiWin 12</div>
</div>

<!-- REGISTER / LOGIN -->
<div id="regscreen" style="display:none;">
  <div class="reg-box" id="reg-box">
    <div class="reg-logo">E‚ú¶</div>
    <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å</h2>
    <p>–°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç ExiWin 12</p>
    <div class="reg-avatar-pick">
      <div class="av-opt sel" data-av="üßë" onclick="pickAv(this)">üßë</div>
      <div class="av-opt" data-av="üë©" onclick="pickAv(this)">üë©</div>
      <div class="av-opt" data-av="üßî" onclick="pickAv(this)">üßî</div>
      <div class="av-opt" data-av="üë®‚Äçüíª" onclick="pickAv(this)">üë®‚Äçüíª</div>
      <div class="av-opt" data-av="ü¶ä" onclick="pickAv(this)">ü¶ä</div>
      <div class="av-opt" data-av="üê±" onclick="pickAv(this)">üê±</div>
      <div class="av-opt" data-av="ü§ñ" onclick="pickAv(this)">ü§ñ</div>
      <div class="av-opt" data-av="üéÆ" onclick="pickAv(this)">üéÆ</div>
    </div>
    <input class="reg-input" type="text" id="reg-name" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" maxlength="20">
    <input class="reg-input" type="password" id="reg-pass" placeholder="–ü–∞—Ä–æ–ª—å (–º–∏–Ω–∏–º—É–º 4 —Å–∏–º–≤–æ–ª–∞)">
    <input class="reg-input" type="password" id="reg-pass2" placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
    <button class="reg-btn" onclick="doRegister()">–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</button>
    <div class="reg-err" id="reg-err"></div>
    <div class="reg-switch" onclick="showLogin()">–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <span>–í–æ–π—Ç–∏</span></div>
  </div>
  <div class="reg-box" id="login-box" style="display:none;">
    <div id="login-avatar" style="font-size:52px;margin-bottom:10px;">üßë</div>
    <h2 id="login-name-disp">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</h2>
    <p>–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞</p>
    <input class="reg-input" type="password" id="login-pass" placeholder="–ü–∞—Ä–æ–ª—å" onkeydown="if(event.key==='Enter')doLogin()">
    <button class="reg-btn" onclick="doLogin()">–í–æ–π—Ç–∏</button>
    <div class="reg-err" id="login-err"></div>
    <div class="reg-switch" onclick="showRegister()">–ù–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç? <span>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</span></div>
  </div>
</div>

<!-- LOCK -->
<div id="lockscreen" style="display:none;">
  <div class="lock-glow"></div>
  <div id="lock-clock">12:00</div>
  <div id="lock-date-lock">–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫, 17 —Ñ–µ–≤—Ä–∞–ª—è</div>
  <div class="lock-user">
    <div id="lock-avatar">üßë</div>
    <div id="lock-username-disp">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</div>
    <div class="lock-hint">üîí –ù–∞–∂–º–∏—Ç–µ –¥–ª—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏</div>
  </div>
</div>

<!-- DESKTOP -->
<div id="desktop" onclick="desktopClick(event)" oncontextmenu="showCtxMenu(event,'desktop')">
  <div class="desk-aurora"></div>
  <div class="desk-glow"></div>
  <div class="desk-icon" style="top:16px;left:18px" ondblclick="openApp('explorer')" onclick="selectIcon(this)"><div class="dico">üíª</div><span>–≠—Ç–æ—Ç –∫–æ–º–ø—å—é—Ç–µ—Ä</span></div>
  <div class="desk-icon" style="top:112px;left:18px" ondblclick="openApp('notepad')" onclick="selectIcon(this)"><div class="dico">üìù</div><span>–ë–ª–æ–∫–Ω–æ—Ç</span></div>
  <div class="desk-icon" style="top:208px;left:18px" ondblclick="openApp('browser')" onclick="selectIcon(this)"><div class="dico">üåê</div><span>Edge</span></div>
  <div class="desk-icon" style="top:304px;left:18px" ondblclick="openApp('calc')" onclick="selectIcon(this)"><div class="dico">üßÆ</div><span>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</span></div>
  <div class="desk-icon" style="top:400px;left:18px" ondblclick="openApp('settings')" onclick="selectIcon(this)"><div class="dico">‚öôÔ∏è</div><span>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã</span></div>
  <div class="desk-icon" style="top:16px;left:118px" ondblclick="openApp('paint')" onclick="selectIcon(this)"><div class="dico">üé®</div><span>Paint</span></div>
  <div class="desk-icon" style="top:112px;left:118px" ondblclick="openApp('taskman')" onclick="selectIcon(this)"><div class="dico">üìä</div><span>–î–∏—Å–ø–µ—Ç—á–µ—Ä –∑–∞–¥–∞—á</span></div>
  <div class="desk-icon" style="top:208px;left:118px" ondblclick="openApp('exianai')" onclick="selectIcon(this)"><div class="dico">ü§ñ</div><span>Exian.AI 3.0</span></div>
  <!-- EXIBLOX / PYTHON LAUNCHER -->
  <div class="desk-icon" style="top:304px;left:118px" ondblclick="launchExiblox()" onclick="selectIcon(this)"><div class="dico">üêç</div><span>Exiblox v3</span></div>
</div>

<!-- TASKBAR -->
<div id="taskbar">
  <div id="tb-left">
    <div id="start-btn" onclick="toggleStart(event)" title="–ü—É—Å–∫">E‚ú¶</div>
    <div class="tb-sep"></div>
  </div>
  <div id="tb-center">
    <div class="tb-btn" onclick="toggleStart(event)">üîç</div>
    <div class="tb-btn" id="tb-explorer" onclick="tbClick('explorer')">üìÅ</div>
    <div class="tb-btn" id="tb-browser"  onclick="tbClick('browser')">üåê</div>
    <div class="tb-btn" id="tb-notepad"  onclick="tbClick('notepad')">üìù</div>
    <div class="tb-btn" id="tb-calc"     onclick="tbClick('calc')">üßÆ</div>
    <div class="tb-btn" id="tb-paint"    onclick="tbClick('paint')">üé®</div>
    <div class="tb-btn" id="tb-settings" onclick="tbClick('settings')">‚öôÔ∏è</div>
    <div class="tb-btn" id="tb-taskman"  onclick="tbClick('taskman')">üìä</div>
    <div class="tb-btn" id="tb-exianai"  onclick="tbClick('exianai')">ü§ñ</div>
  </div>
  <div id="tb-right">
    <div class="tb-sys" onclick="toggleTray(event)"><span>üì∂</span><span>üîä</span><span>üîã</span></div>
    <div id="tb-clock" onclick="toggleTray(event)"><div id="clock-time">12:00</div><div id="clock-date-tb">17.02.2026</div></div>
    <div style="width:4px"></div>
  </div>
</div>

<!-- START MENU -->
<div id="start-menu" onclick="event.stopPropagation()">
  <div id="sm-search"><span>üîç</span><input type="text" id="sm-search-input" placeholder="–ü–æ–∏—Å–∫..." oninput="smSearch(this.value)"></div>
  <div id="sm-pinned-sec">
    <div class="sm-sec">–ó–∞–∫—Ä–µ–ø–ª—ë–Ω–Ω—ã–µ</div>
    <div class="pinned-apps">
      <div class="pin-app" onclick="openApp('explorer');hideAll()"><div class="ico">üìÅ</div><div class="lbl">–ü—Ä–æ–≤–æ–¥–Ω–∏–∫</div></div>
      <div class="pin-app" onclick="openApp('settings');hideAll()"><div class="ico">‚öôÔ∏è</div><div class="lbl">–ü–∞—Ä–∞–º–µ—Ç—Ä—ã</div></div>
      <div class="pin-app" onclick="openApp('browser');hideAll()"><div class="ico">üåê</div><div class="lbl">Edge</div></div>
      <div class="pin-app" onclick="openApp('notepad');hideAll()"><div class="ico">üìù</div><div class="lbl">–ë–ª–æ–∫–Ω–æ—Ç</div></div>
      <div class="pin-app" onclick="openApp('calc');hideAll()"><div class="ico">üßÆ</div><div class="lbl">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</div></div>
      <div class="pin-app" onclick="openApp('paint');hideAll()"><div class="ico">üé®</div><div class="lbl">Paint</div></div>
      <div class="pin-app" onclick="openApp('taskman');hideAll()"><div class="ico">üìä</div><div class="lbl">–î–∏—Å–ø–µ—Ç—á–µ—Ä</div></div>
      <div class="pin-app" onclick="openApp('exianai');hideAll()"><div class="ico">ü§ñ</div><div class="lbl">Exian.AI</div></div>
      <div class="pin-app" onclick="launchExiblox();hideAll()"><div class="ico">üêç</div><div class="lbl">Exiblox v3</div></div>
      <div class="pin-app" onclick="showNotif('–ú–∞–≥–∞–∑–∏–Ω','–°–∫–æ—Ä–æ!','üõí')"><div class="ico">üõí</div><div class="lbl">–ú–∞–≥–∞–∑–∏–Ω</div></div>
      <div class="pin-app" onclick="showNotif('–ü–æ—á—Ç–∞','–ù–µ—Ç –ø–∏—Å–µ–º','‚úâÔ∏è')"><div class="ico">‚úâÔ∏è</div><div class="lbl">–ü–æ—á—Ç–∞</div></div>
      <div class="pin-app" onclick="showNotif('–§–æ—Ç–æ','–ù–µ—Ç —Ñ–æ—Ç–æ','üñºÔ∏è')"><div class="ico">üñºÔ∏è</div><div class="lbl">–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏</div></div>
    </div>
  </div>
  <div class="sm-sec">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ</div>
  <div class="rec-list" id="sm-rec-list">
    <div class="rec-row" onclick="openApp('exianai');hideAll()"><div class="ico">ü§ñ</div><div class="rec-info"><div class="n">Exian.AI ‚Äî –£–º–Ω—ã–π —á–∞—Ç</div><div class="t">–¢–æ–ª—å–∫–æ —á—Ç–æ</div></div></div>
    <div class="rec-row" onclick="openApp('notepad');hideAll()"><div class="ico">üìù</div><div class="rec-info"><div class="n">–ú–æ–∏ –∑–∞–º–µ—Ç–∫–∏</div><div class="t">–í—á–µ—Ä–∞</div></div></div>
    <div class="rec-row" onclick="openApp('paint');hideAll()"><div class="ico">üé®</div><div class="rec-info"><div class="n">–†–∏—Å—É–Ω–æ–∫1.png</div><div class="t">2 –¥–Ω—è –Ω–∞–∑–∞–¥</div></div></div>
  </div>
  <div id="sm-search-results"></div>
  <div id="sm-footer">
    <div id="sm-user" onclick="openApp('settings');hideAll()"><div id="sm-avatar">üßë</div><span id="sm-username">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</span></div>
    <div class="power-menu">
      <div class="pw-btn" onclick="lockScreen()">üîí</div>
      <div class="pw-btn" onclick="reboot()">üîÑ</div>
      <div class="pw-btn" onclick="shutdown()">‚èª</div>
    </div>
  </div>
</div>

<!-- TRAY POPUP -->
<div id="tray-popup" onclick="event.stopPropagation()">
  <div class="tray-time-big" id="tray-time-big">12:00</div>
  <div class="tray-date-str" id="tray-date-str">–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫, 17 —Ñ–µ–≤—Ä–∞–ª—è 2026</div>
  <div class="tray-tiles">
    <div class="tr-tile on"  id="tr-wifi"       onclick="toggleTile('tr-wifi','WiFi')"><div class="ico">üì∂</div><div class="lbl">Wi-Fi</div></div>
    <div class="tr-tile on"  id="tr-bt"         onclick="toggleTile('tr-bt','Bluetooth')"><div class="ico">üîµ</div><div class="lbl">Bluetooth</div></div>
    <div class="tr-tile off" id="tr-airplane"   onclick="toggleTile('tr-airplane','–ê–≤–∏–∞—Ä–µ–∂–∏–º')"><div class="ico">‚úàÔ∏è</div><div class="lbl">–ê–≤–∏–∞—Ä–µ–∂–∏–º</div></div>
    <div class="tr-tile off" id="tr-night"      onclick="toggleNightMode()"><div class="ico">üåô</div><div class="lbl">–ù–æ—á–Ω–æ–π</div></div>
    <div class="tr-tile off" id="tr-light-theme" onclick="toggleLightTheme()"><div class="ico">‚òÄÔ∏è</div><div class="lbl">–°–≤–µ—Ç–ª–∞—è</div></div>
    <div class="tr-tile on"  id="tr-dark-theme" onclick="toggleDarkTheme()"><div class="ico">üåë</div><div class="lbl">–¢—ë–º–Ω–∞—è</div></div>
    <div class="tr-tile on"  id="tr-sound"      onclick="toggleTile('tr-sound','–ó–≤—É–∫')"><div class="ico">üîä</div><div class="lbl">–ó–≤—É–∫</div></div>
    <div class="tr-tile off" id="tr-focus"      onclick="toggleTile('tr-focus','–§–æ–∫—É—Å')"><div class="ico">üéØ</div><div class="lbl">–§–æ–∫—É—Å</div></div>
  </div>
  <div class="sl-row"><span class="ico">üîÜ</span><input type="range" min="10" max="100" value="85" id="bright-sl" oninput="setBright(this.value)"><span class="sl-val" id="bright-val">85%</span></div>
  <div class="sl-row"><span class="ico">üîä</span><input type="range" min="0" max="100" value="60" id="vol-sl" oninput="setVol(this.value)"><span class="sl-val" id="vol-val">60%</span></div>
</div>

<!-- CONTEXT MENU (Desktop / Explorer) -->
<div id="ctx-menu">
  <!-- File-specific items -->
  <div class="ctx-item" id="ctx-open-item" onclick="ctxOpenFile()" style="display:none"><span>üìÇ</span>–û—Ç–∫—Ä—ã—Ç—å</div>
  <div class="ctx-item" id="ctx-move-item" onclick="ctxMoveFile()" style="display:none"><span>üì¶</span>–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤...</div>
  <div class="ctx-item" id="ctx-delete-item" onclick="ctxDeleteFile()" style="display:none"><span>üóëÔ∏è</span>–£–¥–∞–ª–∏—Ç—å</div>
  <div class="ctx-sep" id="ctx-file-sep" style="display:none"></div>

  <!-- Explorer new file button (legacy) -->
  <div class="ctx-item" id="ctx-new-file" onclick="ctxNewFile()" style="display:none"><span>üìÑ</span>–ù–æ–≤—ã–π —Ñ–∞–π–ª</div>

  <!-- Windows-style Create submenu -->
  <div class="ctx-item" id="ctx-create-item" onmouseenter="showCreateSub(event)" onclick="showCreateSub(event)" style="display:none">
    <span>‚ú®</span>–°–æ–∑–¥–∞—Ç—å <span style="margin-left:auto;opacity:.6">‚ñ∂</span>
  </div>

  <div class="ctx-sep"></div>
  <div class="ctx-item" onclick="ctxRefresh()"><span>üîÉ</span>–û–±–Ω–æ–≤–∏—Ç—å</div>
  <div class="ctx-sep"></div>
  <div class="ctx-item" onclick="toggleLightTheme();hideAll()"><span>‚òÄÔ∏è</span>–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞</div>
  <div class="ctx-item" onclick="toggleDarkTheme();hideAll()"><span>üåë</span>–¢—ë–º–Ω–∞—è —Ç–µ–º–∞</div>
  <div class="ctx-sep"></div>
  <div class="ctx-item" onclick="openApp('settings');hideAll()"><span>‚öôÔ∏è</span>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã</div>
</div>

<!-- CREATE SUBMENU (Windows-style) -->
<div id="ctx-create-sub" onclick="event.stopPropagation()">
  <div class="ctx-item" onclick="ctxCreateFolder()"><span>üìÅ</span>–ü–∞–ø–∫—É</div>
  <div class="ctx-item" onclick="ctxCreateTextDoc()"><span>üìù</span>–¢–µ–∫—Å—Ç–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç</div>
  <div class="ctx-item" onclick="ctxCreateFile()"><span>üìÑ</span>–ù–æ–≤—ã–π —Ñ–∞–π–ª</div>
  <div class="ctx-item" onclick="ctxCreateShortcut()"><span>üîó</span>–Ø—Ä–ª—ã–∫</div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê WINDOWS ‚ïê‚ïê‚ïê‚ïê -->

<!-- EXPLORER -->
<div class="window" id="win-explorer" style="width:780px;height:520px;top:40px;left:60px;" onclick="bringFront('win-explorer')">
  <div class="titlebar" onmousedown="dragWin(event,'win-explorer')">
    <span class="tb-icon">üìÅ</span><span class="tb-title">–ü—Ä–æ–≤–æ–¥–Ω–∏–∫</span>
    <div class="win-btns"><div class="wb" onclick="minimizeWin('explorer')">‚îÄ</div><div class="wb" onclick="toggleMax('win-explorer')">‚¨ú</div><div class="wb cls" onclick="closeWin('explorer')">‚úï</div></div>
  </div>
  <div class="win-body">
    <div class="exp-wrap">
      <div class="exp-topbar">
        <div class="exp-nav">‚óÄ</div><div class="exp-nav">‚ñ∂</div><div class="exp-nav" onclick="expNav('ExiWin')">‚Üë</div>
        <input class="exp-path" id="exp-path" value="ExiWin://–†–∞–±–æ—á–∏–π —Å—Ç–æ–ª">
        <input type="text" class="exp-path" style="max-width:160px" placeholder="üîç –ü–æ–∏—Å–∫..." oninput="expSearch(this.value)">
        <div class="exp-nav" onclick="expNewFolder()">üìÅ+</div>
      </div>
      <div class="exp-body">
        <div class="exp-side">
          <div class="exp-side-item active" data-folder="–†–∞–±–æ—á–∏–π —Å—Ç–æ–ª" onclick="expNav('–†–∞–±–æ—á–∏–π —Å—Ç–æ–ª')">üñ•Ô∏è –†–∞–±–æ—á–∏–π —Å—Ç–æ–ª</div>
          <div class="exp-side-item" data-folder="–î–æ–∫—É–º–µ–Ω—Ç—ã" onclick="expNav('–î–æ–∫—É–º–µ–Ω—Ç—ã')">üìÑ –î–æ–∫—É–º–µ–Ω—Ç—ã</div>
          <div class="exp-side-item" data-folder="–ó–∞–≥—Ä—É–∑–∫–∏" onclick="expNav('–ó–∞–≥—Ä—É–∑–∫–∏')">‚¨áÔ∏è –ó–∞–≥—Ä—É–∑–∫–∏</div>
          <div class="exp-side-item" data-folder="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è" onclick="expNav('–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è')">üñºÔ∏è –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</div>
          <div class="exp-side-item" data-folder="–ú—É–∑—ã–∫–∞" onclick="expNav('–ú—É–∑—ã–∫–∞')">üéµ –ú—É–∑—ã–∫–∞</div>
          <div class="exp-side-item" data-folder="ExiWin" onclick="expNav('ExiWin')">üíª ExiWin (C:)</div>
        </div>
        <div class="exp-files" id="exp-files-content" oncontextmenu="showCtxMenu(event,'explorer')"></div>
      </div>
      <!-- STATUS BAR with view mode buttons -->
      <div class="exp-statusbar">
        <span id="exp-status">–û–±—ä–µ–∫—Ç–æ–≤: 0</span>
        <div style="display:flex;align-items:center;gap:3px;">
          <div class="exp-view-btn active-view" id="exp-view-large" onclick="setExpView('large')" title="–ö—Ä—É–ø–Ω—ã–µ –∑–Ω–∞—á–∫–∏">‚äû</div>
          <div class="exp-view-btn" id="exp-view-normal" onclick="setExpView('normal')" title="–û–±—ã—á–Ω—ã–µ">‚äü</div>
          <div class="exp-view-btn" id="exp-view-small" onclick="setExpView('small')" title="–ú–µ–ª–∫–∏–µ">‚ò∞</div>
        </div>
      </div>
    </div>
  </div>
  <div class="resize-handle" onmousedown="resizeWin(event,'win-explorer')"></div>
</div>

<!-- NOTEPAD -->
<div class="window" id="win-notepad" style="width:680px;height:500px;top:50px;left:80px;" onclick="bringFront('win-notepad')">
  <div class="titlebar" onmousedown="dragWin(event,'win-notepad')">
    <span class="tb-icon">üìù</span><span class="tb-title">–ë–ª–æ–∫–Ω–æ—Ç</span>
    <div class="win-btns"><div class="wb" onclick="minimizeWin('notepad')">‚îÄ</div><div class="wb" onclick="toggleMax('win-notepad')">‚¨ú</div><div class="wb cls" onclick="closeWin('notepad')">‚úï</div></div>
  </div>
  <div class="win-body">
    <div class="np-wrap">
      <div class="np-menubar">
        <div class="np-menu-item" onclick="npToggleMenu(this)">–§–∞–π–ª<div class="np-dropdown"><div class="np-dd-item" onclick="npNew()">–ù–æ–≤—ã–π <kbd>Ctrl+N</kbd></div><div class="np-dd-sep"></div><div class="np-dd-item" onclick="npSave()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å <kbd>Ctrl+S</kbd></div><div class="np-dd-sep"></div><div class="np-dd-item" onclick="closeWin('notepad')">–ó–∞–∫—Ä—ã—Ç—å</div></div></div>
        <div class="np-menu-item" onclick="npToggleMenu(this)">–ü—Ä–∞–≤–∫–∞<div class="np-dropdown"><div class="np-dd-item" onclick="npCopy()">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</div><div class="np-dd-item" onclick="npSelectAll()">–í—ã–±—Ä–∞—Ç—å –≤—Å—ë</div><div class="np-dd-sep"></div><div class="np-dd-item" onclick="npFind()">–ù–∞–π—Ç–∏</div></div></div>
        <div class="np-menu-item" onclick="npToggleMenu(this)">–í–∏–¥<div class="np-dropdown"><div class="np-dd-item" onclick="npFontUp()">–ë–æ–ª—å—à–µ —à—Ä–∏—Ñ—Ç</div><div class="np-dd-item" onclick="npFontDown()">–ú–µ–Ω—å—à–µ —à—Ä–∏—Ñ—Ç</div><div class="np-dd-sep"></div><div class="np-dd-item" onclick="npWrap()">–ü–µ—Ä–µ–Ω–æ—Å —Å—Ç—Ä–æ–∫</div></div></div>
      </div>
      <textarea id="np-area" placeholder="–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å —Ç–µ–∫—Å—Ç..." oninput="npChanged()" onclick="npUpdateStatus()" onkeyup="npUpdateStatus()" spellcheck="false"></textarea>
      <div class="np-statusbar"><span id="np-status-ln">–°—Ç—Ä–æ–∫: 1 | –°–ª–æ–≤: 0</span><span id="np-status-pos">–°—Ç—Ä 1, –°—Ç–± 1</span><span>UTF-8</span></div>
    </div>
  </div>
  <div class="resize-handle" onmousedown="resizeWin(event,'win-notepad')"></div>
</div>

<!-- CALCULATOR -->
<div class="window" id="win-calc" style="width:320px;height:500px;top:50px;left:100px;" onclick="bringFront('win-calc')">
  <div class="titlebar" onmousedown="dragWin(event,'win-calc')">
    <span class="tb-icon">üßÆ</span><span class="tb-title">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</span>
    <div class="win-btns"><div class="wb" onclick="minimizeWin('calc')">‚îÄ</div><div class="wb" onclick="toggleMax('win-calc')">‚¨ú</div><div class="wb cls" onclick="closeWin('calc')">‚úï</div></div>
  </div>
  <div class="win-body">
    <div class="calc-wrap">
      <div class="calc-modes"><div class="calc-mode-btn active" data-mode="standard" onclick="calcSetMode('standard')">–û–±—ã—á–Ω—ã–π</div><div class="calc-mode-btn" data-mode="scientific" onclick="calcSetMode('scientific')">–ù–∞—É—á–Ω—ã–π</div></div>
      <div class="calc-display"><div class="calc-expr" id="calc-expr"></div><div class="calc-result" id="calc-result">0</div></div>
      <div class="calc-sci" id="calc-sci">
        <div class="cc cc-sci-btn" onclick="calcSci('sin')">sin</div><div class="cc cc-sci-btn" onclick="calcSci('cos')">cos</div><div class="cc cc-sci-btn" onclick="calcSci('tan')">tan</div><div class="cc cc-sci-btn" onclick="calcSci('sqrt')">‚àöx</div><div class="cc cc-sci-btn" onclick="calcSci('log')">log</div>
        <div class="cc cc-sci-btn" onclick="calcSci('ln')">ln</div><div class="cc cc-sci-btn" onclick="calcSci('x2')">x¬≤</div><div class="cc cc-sci-btn" onclick="calcSci('x3')">x¬≥</div><div class="cc cc-sci-btn" onclick="calcSci('1/x')">1/x</div><div class="cc cc-sci-btn" onclick="calcSci('pi')">œÄ</div>
      </div>
      <div class="calc-grid">
        <div class="cc cc-fn" onclick="calcPress('C')">C</div><div class="cc cc-fn" onclick="calcPress('¬±')">¬±</div><div class="cc cc-fn" onclick="calcPress('%')">%</div><div class="cc cc-op" onclick="calcPress('√∑')">√∑</div>
        <div class="cc cc-num" onclick="calcPress('7')">7</div><div class="cc cc-num" onclick="calcPress('8')">8</div><div class="cc cc-num" onclick="calcPress('9')">9</div><div class="cc cc-op" onclick="calcPress('√ó')">√ó</div>
        <div class="cc cc-num" onclick="calcPress('4')">4</div><div class="cc cc-num" onclick="calcPress('5')">5</div><div class="cc cc-num" onclick="calcPress('6')">6</div><div class="cc cc-op" onclick="calcPress('-')">‚àí</div>
        <div class="cc cc-num" onclick="calcPress('1')">1</div><div class="cc cc-num" onclick="calcPress('2')">2</div><div class="cc cc-num" onclick="calcPress('3')">3</div><div class="cc cc-op" onclick="calcPress('+')">+</div>
        <div class="cc cc-fn" onclick="calcPress('‚å´')">‚å´</div><div class="cc cc-num" onclick="calcPress('0')">0</div><div class="cc cc-num" onclick="calcPress('.')">.</div><div class="cc cc-eq" onclick="calcPress('=')">=</div>
      </div>
    </div>
  </div>
</div>

<!-- SETTINGS -->
<div class="window" id="win-settings" style="width:720px;height:520px;top:50px;left:80px;" onclick="bringFront('win-settings')">
  <div class="titlebar" onmousedown="dragWin(event,'win-settings')">
    <span class="tb-icon">‚öôÔ∏è</span><span class="tb-title">–ü–∞—Ä–∞–º–µ—Ç—Ä—ã</span>
    <div class="win-btns"><div class="wb" onclick="minimizeWin('settings')">‚îÄ</div><div class="wb" onclick="toggleMax('win-settings')">‚¨ú</div><div class="wb cls" onclick="closeWin('settings')">‚úï</div></div>
  </div>
  <div class="win-body">
    <div class="set-wrap">
      <div class="set-side">
        <div class="set-side-item active" data-page="system" onclick="setPage('system')">üíª –°–∏—Å—Ç–µ–º–∞</div>
        <div class="set-side-item" data-page="display" onclick="setPage('display')">üñ•Ô∏è –≠–∫—Ä–∞–Ω</div>
        <div class="set-side-item" data-page="theme" onclick="setPage('theme')">üé® –¢–µ–º–∞</div>
        <div class="set-side-item" data-page="network" onclick="setPage('network')">üåê –°–µ—Ç—å</div>
        <div class="set-side-item" data-page="sound" onclick="setPage('sound')">üîä –ó–≤—É–∫</div>
        <div class="set-side-item" data-page="account" onclick="setPage('account')">üë§ –ê–∫–∫–∞—É–Ω—Ç</div>
        <div class="set-side-item" data-page="about" onclick="setPage('about')">‚ÑπÔ∏è –û —Å–∏—Å—Ç–µ–º–µ</div>
      </div>
      <div class="set-content">
        <div class="set-page active" id="set-system"><div class="set-h1">–°–∏—Å—Ç–µ–º–∞</div><div class="set-card"><div class="set-card-l"><div class="n">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</div><div class="d">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</div></div><div class="toggle on" onclick="this.classList.toggle('on')"></div></div><div class="set-card"><div class="set-card-l"><div class="n">–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ ExiWin</div></div><div class="toggle on" onclick="this.classList.toggle('on')"></div></div><div class="set-card"><div class="set-card-l"><div class="n">–†–µ–∂–∏–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</div></div><div class="toggle" onclick="this.classList.toggle('on')"></div></div></div>
        <div class="set-page" id="set-display"><div class="set-h1">–≠–∫—Ä–∞–Ω</div><div class="set-card"><div class="set-card-l"><div class="n">–Ø—Ä–∫–æ—Å—Ç—å</div><div class="set-range-wrap"><input type="range" min="10" max="100" value="85" oninput="setBright(this.value)"></div></div></div><div class="set-card"><div class="set-card-l"><div class="n">–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ</div></div><select class="set-select"><option>1920√ó1080</option><option>2560√ó1440</option></select></div><div class="set-card"><div class="set-card-l"><div class="n">–ù–æ—á–Ω–æ–π —Ä–µ–∂–∏–º</div></div><div class="toggle" onclick="toggleNightMode();this.classList.toggle('on')"></div></div></div>
        <div class="set-page" id="set-theme"><div class="set-h1">–¢–µ–º–∞</div><div class="set-card"><div class="set-card-l"><div class="n">–¢—ë–º–Ω–∞—è —Ç–µ–º–∞</div></div><div class="toggle on" id="set-dark-t" onclick="toggleDarkTheme();el('set-light-t').classList.remove('on');this.classList.add('on')"></div></div><div class="set-card"><div class="set-card-l"><div class="n">–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞</div></div><div class="toggle" id="set-light-t" onclick="toggleLightTheme();el('set-dark-t').classList.remove('on');this.classList.add('on')"></div></div></div>
        <div class="set-page" id="set-network"><div class="set-h1">–°–µ—Ç—å</div><div class="set-card"><div class="set-card-l"><div class="n">Wi-Fi</div><div class="d">ExiWin-Network</div></div><div class="toggle on" onclick="this.classList.toggle('on')"></div></div><div class="set-card"><div class="set-card-l"><div class="n">Bluetooth</div></div><div class="toggle on" onclick="this.classList.toggle('on')"></div></div></div>
        <div class="set-page" id="set-sound"><div class="set-h1">–ó–≤—É–∫</div><div class="set-card"><div class="set-card-l"><div class="n">–ì—Ä–æ–º–∫–æ—Å—Ç—å</div><div class="set-range-wrap"><input type="range" min="0" max="100" value="60" oninput="setVol(this.value)"></div></div></div><div class="set-card"><div class="set-card-l"><div class="n">–ó–≤—É–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</div></div><div class="toggle on" onclick="this.classList.toggle('on')"></div></div></div>
        <div class="set-page" id="set-account"><div class="set-h1">–ê–∫–∫–∞—É–Ω—Ç</div><div class="set-card"><div class="set-card-l"><div class="n" id="set-uname">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</div><div class="d">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä ExiWin</div></div></div><div class="set-card"><div class="set-card-l"><div class="n">–°–±—Ä–æ—Å–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç</div><div class="d">–£–¥–∞–ª–∏—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ</div></div><div style="color:#e74c3c;cursor:pointer;font-size:13px" onclick="setResetUser()">–°–±—Ä–æ—Å–∏—Ç—å</div></div></div>
        <div class="set-page" id="set-about"><div class="set-h1">–û —Å–∏—Å—Ç–µ–º–µ</div><div class="set-card"><div class="set-card-l"><div class="n">ExiWin 12</div><div class="d">–í–µ—Ä—Å–∏—è 24H2 ‚Äî Build 26100</div></div></div><div class="set-card"><div class="set-card-l"><div class="n">–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫</div><div class="d">Exian Research Labs</div></div></div><div class="set-card"><div class="set-card-l"><div class="n">–¶–ü</div><div class="d">ExiCPU x64 @ 3.6 –ì–ì—Ü</div></div></div><div class="set-card"><div class="set-card-l"><div class="n">–û–ó–£</div><div class="d">8 –ì–ë DDR5</div></div></div><div class="set-card"><div class="set-card-l"><div class="n">AI</div><div class="d">Exian.AI 3.0 ‚Äî –£–º–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç</div></div></div></div>
      </div>
    </div>
  </div>
  <div class="resize-handle" onmousedown="resizeWin(event,'win-settings')"></div>
</div>

<!-- BROWSER -->
<div class="window" id="win-browser" style="width:820px;height:560px;top:40px;left:50px;" onclick="bringFront('win-browser')">
  <div class="titlebar" onmousedown="dragWin(event,'win-browser')">
    <span class="tb-icon">üåê</span><span class="tb-title">ExiWin Edge</span>
    <div class="win-btns"><div class="wb" onclick="minimizeWin('browser')">‚îÄ</div><div class="wb" onclick="toggleMax('win-browser')">‚¨ú</div><div class="wb cls" onclick="closeWin('browser')">‚úï</div></div>
  </div>
  <div class="win-body">
    <div class="br-wrap">
      <div class="br-bar">
        <div class="br-nav" onclick="brBack()">‚óÄ</div><div class="br-nav" onclick="brForward()">‚ñ∂</div><div class="br-nav" onclick="brRefresh()">üîÉ</div><div class="br-nav" onclick="brNewTab()">üè†</div>
        <input class="br-url-bar" id="br-url" type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å..." onkeydown="brKeyNav(event)">
        <div class="br-nav" onclick="brNavigate(el('br-url').value)">‚Üí</div>
      </div>
      <div id="br-newtab">
        <div class="br-greeting" id="br-hello">–î–æ–±—Ä—ã–π –¥–µ–Ω—å!</div>
        <div class="br-searchbar"><span>üîç</span><input type="text" id="br-search-input" placeholder="–ü–æ–∏—Å–∫..."><button onclick="brSearch(el('br-search-input').value)">–ù–∞–π—Ç–∏</button></div>
        <div class="br-shortcuts">
          <div class="br-sc" onclick="brShortcut('https://google.com')"><div class="ico">üîç</div><span>Google</span></div>
          <div class="br-sc" onclick="brShortcut('https://github.com')"><div class="ico">üêô</div><span>GitHub</span></div>
          <div class="br-sc" onclick="brShortcut('https://youtube.com')"><div class="ico">‚ñ∂Ô∏è</div><span>YouTube</span></div>
          <div class="br-sc" onclick="brShortcut('https://wikipedia.org')"><div class="ico">üìñ</div><span>Wikipedia</span></div>
          <div class="br-sc" onclick="brShortcut('https://stackoverflow.com')"><div class="ico">üí¨</div><span>Stack Overflow</span></div>
        </div>
      </div>
      <iframe id="br-frame" sandbox="allow-scripts allow-same-origin allow-forms"></iframe>
    </div>
  </div>
  <div class="resize-handle" onmousedown="resizeWin(event,'win-browser')"></div>
</div>

<!-- PAINT -->
<div class="window" id="win-paint" style="width:760px;height:540px;top:40px;left:60px;" onclick="bringFront('win-paint')">
  <div class="titlebar" onmousedown="dragWin(event,'win-paint')">
    <span class="tb-icon">üé®</span><span class="tb-title">Paint</span>
    <div class="win-btns"><div class="wb" onclick="minimizeWin('paint')">‚îÄ</div><div class="wb" onclick="toggleMax('win-paint')">‚¨ú</div><div class="wb cls" onclick="closeWin('paint')">‚úï</div></div>
  </div>
  <div class="win-body">
    <div class="paint-wrap">
      <div class="paint-toolbar">
        <div class="paint-tool active" onclick="selectPaintTool('pen',this)">‚úèÔ∏è</div>
        <div class="paint-tool" onclick="selectPaintTool('eraser',this)">üßπ</div>
        <div class="paint-tool" onclick="selectPaintTool('fill',this)">ü™£</div>
        <div class="paint-tool" onclick="paintClear()">üóëÔ∏è</div>
        <div class="paint-tool" onclick="paintSave()">üíæ</div>
        <div style="width:1px;height:24px;background:var(--border)"></div>
        <div class="paint-colors">
          <div class="paint-color active" style="background:#0078d4" onclick="selectPaintColor('#0078d4',this)"></div>
          <div class="paint-color" style="background:#e74c3c" onclick="selectPaintColor('#e74c3c',this)"></div>
          <div class="paint-color" style="background:#2ecc71" onclick="selectPaintColor('#2ecc71',this)"></div>
          <div class="paint-color" style="background:#f1c40f" onclick="selectPaintColor('#f1c40f',this)"></div>
          <div class="paint-color" style="background:#9b59b6" onclick="selectPaintColor('#9b59b6',this)"></div>
          <div class="paint-color" style="background:#e67e22" onclick="selectPaintColor('#e67e22',this)"></div>
          <div class="paint-color" style="background:#1abc9c" onclick="selectPaintColor('#1abc9c',this)"></div>
          <div class="paint-color" style="background:#ff69b4" onclick="selectPaintColor('#ff69b4',this)"></div>
          <div class="paint-color" style="background:#000" onclick="selectPaintColor('#000000',this)"></div>
          <div class="paint-color" style="background:#fff;border-color:var(--border)" onclick="selectPaintColor('#ffffff',this)"></div>
        </div>
        <div class="paint-size"><span>–†–∞–∑–º–µ—Ä:</span><input type="range" min="1" max="30" value="4" oninput="setPaintSize(this.value)"><span id="paint-size-val">4px</span></div>
      </div>
      <div class="paint-canvas-wrap" id="paint-canvas-wrap"><canvas id="paint-canvas"></canvas></div>
    </div>
  </div>
  <div class="resize-handle" onmousedown="resizeWin(event,'win-paint')"></div>
</div>

<!-- TASK MANAGER -->
<div class="window" id="win-taskman" style="width:700px;height:500px;top:50px;left:80px;" onclick="bringFront('win-taskman')">
  <div class="titlebar" onmousedown="dragWin(event,'win-taskman')">
    <span class="tb-icon">üìä</span><span class="tb-title">–î–∏—Å–ø–µ—Ç—á–µ—Ä –∑–∞–¥–∞—á</span>
    <div class="win-btns"><div class="wb" onclick="minimizeWin('taskman')">‚îÄ</div><div class="wb" onclick="toggleMax('win-taskman')">‚¨ú</div><div class="wb cls" onclick="closeWin('taskman')">‚úï</div></div>
  </div>
  <div class="win-body">
    <div class="tm-wrap">
      <div class="tm-tabs">
        <div class="tm-tab active" data-tab="processes" onclick="tmRender('processes')">–ü—Ä–æ—Ü–µ—Å—Å—ã</div>
        <div class="tm-tab" data-tab="performance" onclick="tmRender('performance')">–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</div>
        <div class="tm-tab" data-tab="startup" onclick="tmRender('startup')">–ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞</div>
      </div>
      <div class="tm-body">
        <table class="tm-table" id="tm-proc-table"><thead><tr><th>–ò–º—è</th><th>–¶–ü</th><th>–û–ó–£</th><th>PID</th><th>–°—Ç–∞—Ç—É—Å</th></tr></thead><tbody id="tm-proc-body"></tbody></table>
        <div id="tm-perf-body" style="display:none"></div>
        <div id="tm-startup-body-wrap" style="display:none"><table class="tm-table"><thead><tr><th>–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</th><th>–í–ª–∏—è–Ω–∏–µ</th><th>–°—Ç–∞—Ç—É—Å</th></tr></thead><tbody id="tm-startup-body"></tbody></table></div>
      </div>
    </div>
  </div>
  <div class="resize-handle" onmousedown="resizeWin(event,'win-taskman')"></div>
</div>

<!-- EXIAN.AI 3.0 -->
<div class="window" id="win-exianai" style="width:900px;height:620px;top:30px;left:50px;" onclick="bringFront('win-exianai')">
  <div class="titlebar" onmousedown="dragWin(event,'win-exianai')">
    <span class="tb-icon">ü§ñ</span><span class="tb-title">Exian.AI 3.0 ‚Äî –£–º–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç</span>
    <div class="win-btns">
      <div class="wb" onclick="minimizeWin('exianai')">‚îÄ</div>
      <div class="wb" onclick="toggleMax('win-exianai')">‚¨ú</div>
      <div class="wb cls" onclick="closeWin('exianai')">‚úï</div>
    </div>
  </div>
  <div class="win-body" style="overflow:hidden">
    <div class="echat-wrap">
      <div class="echat-sidebar">
        <div class="echat-sidebar-header">
          <span>üí¨ –ß–∞—Ç—ã</span>
          <button class="echat-new-btn" onclick="newExianChat()">+ –ù–æ–≤—ã–π</button>
        </div>
        <div id="exian-sessions-list"></div>
        <div class="echat-sidebar-footer">
          <div class="echat-clear-btn" onclick="clearAllChats()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ —á–∞—Ç—ã</div>
        </div>
      </div>
      <div class="echat-main">
        <div class="echat-header">
          <div class="echat-header-ico">ü§ñ</div>
          <div class="echat-header-info">
            <div class="echat-header-name">Exian.AI 3.0</div>
            <div class="echat-header-status">–û–Ω–ª–∞–π–Ω ¬∑ ExiWin 12</div>
          </div>
        </div>
        <div class="echat-quick">
          <div class="echat-quick-btn" onclick="exianQuickPrompt('–ß—Ç–æ —Ç—ã —É–º–µ–µ—à—å?')">ü§î –ß—Ç–æ —Ç—ã —É–º–µ–µ—à—å?</div>
          <div class="echat-quick-btn" onclick="exianQuickPrompt('–ù–∞–ø–∏—à–∏ –∫–æ–¥ –Ω–∞ Python')">üíª –ö–æ–¥ –Ω–∞ Python</div>
          <div class="echat-quick-btn" onclick="exianQuickPrompt('–û–±—ä—è—Å–Ω–∏ –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–π—Ä–æ—Å–µ—Ç—å')">üß† –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç AI?</div>
          <div class="echat-quick-btn" onclick="exianQuickPrompt('–ü—Ä–∏–¥—É–º–∞–π –∏–Ω—Ç–µ—Ä–µ—Å–Ω—É—é –∏–¥–µ—é –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞')">üí° –ò–¥–µ—è –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞</div>
          <div class="echat-quick-btn" onclick="exianQuickPrompt('–†–∞—Å—Å–∫–∞–∂–∏ –∞–Ω–µ–∫–¥–æ—Ç')">üòÑ –†–∞—Å—Å–∫–∞–∂–∏ –∞–Ω–µ–∫–¥–æ—Ç</div>
        </div>
        <div id="exian-chat-messages"></div>
        <div class="echat-input-area">
          <div class="echat-input-row">
            <textarea id="exian-chat-input" placeholder="–ù–∞–ø–∏—à–∏ —á—Ç–æ-–Ω–∏–±—É–¥—å... (Enter ‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç—å)" rows="1"></textarea>
            <button id="exian-send-btn" onclick="exianSendMessage()" title="–û—Ç–ø—Ä–∞–≤–∏—Ç—å">‚û§</button>
          </div>
          <div class="echat-hint">Enter ‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç—å ¬∑ Shift+Enter ‚Äî –Ω–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞ ¬∑ Exian.AI 3.0 powered by ExiWin 12</div>
        </div>
      </div>
    </div>
  </div>
  <div class="resize-handle" onmousedown="resizeWin(event,'win-exianai')"></div>
</div>
  <!-- 1. –û–∫–Ω–æ ‚Äî –≤—Å—Ç–∞–≤–∏—Ç—å –ø–µ—Ä–µ–¥ </body> -->
<div class="window" id="win-exiblox" style="width:1100px;height:700px;top:20px;left:40px;" onclick="bringFront('win-exiblox')">
  <div class="titlebar" onmousedown="dragWin(event,'win-exiblox')">
    <span class="tb-icon">üêç</span>
    <span class="tb-title">Exiblox v3</span>
    <div class="win-btns">
      <div class="wb" onclick="minimizeWin('exiblox')">‚îÄ</div>
      <div class="wb" onclick="toggleMax('win-exiblox')">‚¨ú</div>
      <div class="wb cls" onclick="closeWin('exiblox')">‚úï</div>
    </div>
  </div>
  <div class="win-body" id="exiblox-root" style="overflow:hidden;"></div>
  <div class="resize-handle" onmousedown="resizeWin(event,'win-exiblox')"></div>
</div>

<!-- 2. –ö–Ω–æ–ø–∫–∞ –≤ —Ç–∞—Å–∫–±–∞—Ä–µ (–≤ #tb-center) -->
<div class="tb-btn" id="tb-exiblox" onclick="tbClick('exiblox')">üêç</div>

<!-- 3. –°–∫—Ä–∏–ø—Ç -->
<script src="exiblox.js"></script>

<!-- NOTIFICATIONS -->
<div id="notif-stack"></div>

<script src="app.js"></script>
<script src="windows.js"></script>
<script src="apps.js"></script>
<script src="exianai.js"></script>
<script>
// –ü–∞—Ç—á Task Manager
const _tm = tmRender;
tmRender = function(tab) {
  document.querySelectorAll('.tm-tab').forEach(t=>t.classList.toggle('active',t.dataset.tab===tab));
  const proc=el('tm-proc-table'), perf=el('tm-perf-body'), start=el('tm-startup-body-wrap');
  if(proc) proc.style.display=tab==='processes'?'table':'none';
  if(perf) perf.style.display=tab==='performance'?'block':'none';
  if(start) start.style.display=tab==='startup'?'block':'none';
  if(tab==='processes') tmRenderProcesses();
  else if(tab==='performance') tmRenderPerf();
  else if(tab==='startup') tmRenderStartup();
};
// –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
window.addEventListener('DOMContentLoaded',()=>{
  const h=new Date().getHours(), g=el('br-hello');
  if(g) g.textContent=h<6?'–î–æ–±—Ä–æ–π –Ω–æ—á–∏!':h<12?'–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ!':h<18?'–î–æ–±—Ä—ã–π –¥–µ–Ω—å!':'–î–æ–±—Ä—ã–π –≤–µ—á–µ—Ä!';
});
// –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å ctx-file-sep —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –Ω—É–∂–µ–Ω
document.addEventListener('DOMContentLoaded',()=>{
  // Init view mode buttons state
  setExpView('large');
});
</script>
</body>
</html>
